<?xml version="1.0" encoding="UTF-8"?>
<!--
 ! Project home: https://github.com/jaxio/celerio-angular-quickstart
 ! 
 ! Source code generated by Celerio, an Open Source code generator by Jaxio.
 ! Documentation: http://www.jaxio.com/documentation/celerio/
 ! Modificado por CARLOS BAZALAR
 ! Email: cbazalarlarosa@gmail.com
 ! Template pack-angular:src/main/java/mapper/EntityXMLMapper.xml.e.vm
-->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.incloud.hcp.mapper.CerCertificadoMapper">

<resultMap id="cerCertificadoResultMap" type="com.incloud.hcp.domain.CerCertificado">
	<id property="id" jdbcType="INTEGER" column="cer_certificado_id" />
	<result property="codigoCertificado" jdbcType="VARCHAR" column="codigo_certificado" />	
	<result property="mtrProveedor.id" jdbcType="INTEGER" column="mtr_proveedor_id" />
	<result property="cerNotaPedido.id" jdbcType="INTEGER" column="cer_nota_pedido_id" />
	<result property="mtrSociedad.id" jdbcType="INTEGER" column="mtr_sociedad_id" />
	<result property="mtrEstado.id" jdbcType="INTEGER" column="mtr_estado_id" />
	<result property="mtrMoneda.id" jdbcType="INTEGER" column="mtr_moneda_id" />
	<result property="mtrClaseDocumento.id" jdbcType="INTEGER" column="mtr_clase_documento_id" />
	<result property="concepto" jdbcType="VARCHAR" column="concepto" />	
	<result property="descuentoh" jdbcType="VARCHAR" column="descuentoh" />	
	<result property="fechaAprobacion" jdbcType="TIMESTAMP" column="fecha_aprobacion" />
	<result property="fechaContabDocument" jdbcType="TIMESTAMP" column="fecha_contab_document" />
	<result property="fechaDesde" jdbcType="TIMESTAMP" column="fecha_desde" />
	<result property="fechaHasta" jdbcType="TIMESTAMP" column="fecha_hasta" />
	<result property="grupoCompras" jdbcType="VARCHAR" column="grupo_compras" />	
	<result property="hojaServicio" jdbcType="VARCHAR" column="hoja_servicio" />	
	<result property="lugarPrestServ" jdbcType="VARCHAR" column="lugar_prest_serv" />	
	<result property="monto" jdbcType="NUMERIC" column="monto" />
	<result property="montoTotal" jdbcType="NUMERIC" column="monto_total" />
	<result property="montoTotalAdjustado" jdbcType="NUMERIC" column="monto_total_adjustado" />
	<result property="notasRechazo" jdbcType="VARCHAR" column="notas_rechazo" />	
	<result property="observacion" jdbcType="VARCHAR" column="observacion" />	
	<result property="ocurrencia" jdbcType="INTEGER" column="ocurrencia" />
	<result property="respoExterno" jdbcType="VARCHAR" column="respo_externo" />	
	<result property="solicitante" jdbcType="VARCHAR" column="solicitante" />	
	<result property="indTieneFactura" jdbcType="VARCHAR" column="ind_tiene_factura" />	
	<result property="mtrCentro.id" jdbcType="INTEGER" column="mtr_centro_id" />
	<result property="mtrAlmacen.id" jdbcType="INTEGER" column="mtr_almacen_id" />
	<result property="indCreacionAutomatica" jdbcType="VARCHAR" column="ind_creacion_automatica" />	
	<result property="fechaContabilizacion" jdbcType="TIMESTAMP" column="fecha_contabilizacion" />
	<result property="nroGuiaRemision" jdbcType="VARCHAR" column="nro_guia_remision" />	
</resultMap>


<select id="getLista" parameterType="com.incloud.hcp.domain.CerCertificado" resultMap="cerCertificadoResultMap">
	SELECT 
      cer_certificado_id , 
      codigo_certificado , 
      mtr_proveedor_id , 
      cer_nota_pedido_id , 
      mtr_sociedad_id , 
      mtr_estado_id , 
      mtr_moneda_id , 
      mtr_clase_documento_id , 
      concepto , 
      descuentoh , 
      fecha_aprobacion , 
      fecha_contab_document , 
      fecha_desde , 
      fecha_hasta , 
      grupo_compras , 
      hoja_servicio , 
      lugar_prest_serv , 
      monto , 
      monto_total , 
      monto_total_adjustado , 
      notas_rechazo , 
      observacion , 
      ocurrencia , 
      respo_externo , 
      solicitante , 
      ind_tiene_factura , 
      mtr_centro_id , 
      mtr_almacen_id , 
      ind_creacion_automatica , 
      fecha_contabilizacion , 
      nro_guia_remision 
	FROM
	cer_certificado
	WHERE 1 = 1
	<if test="id != null ">
		AND cer_certificado_id = #{id, jdbcType=INTEGER}
	</if>	
	<if test="codigoCertificado != null and codigoCertificado != '' ">
		AND codigo_certificado = #{codigoCertificado}
	</if>	
	<if test="mtrProveedor != null and mtrProveedor.id != null">
		AND mtr_proveedor_id = #{mtrProveedor.id, jdbcType=INTEGER}
	</if>	
	<if test="cerNotaPedido != null and cerNotaPedido.id != null">
		AND cer_nota_pedido_id = #{cerNotaPedido.id, jdbcType=INTEGER}
	</if>	
	<if test="mtrSociedad != null and mtrSociedad.id != null">
		AND mtr_sociedad_id = #{mtrSociedad.id, jdbcType=INTEGER}
	</if>	
	<if test="mtrEstado != null and mtrEstado.id != null">
		AND mtr_estado_id = #{mtrEstado.id, jdbcType=INTEGER}
	</if>	
	<if test="mtrMoneda != null and mtrMoneda.id != null">
		AND mtr_moneda_id = #{mtrMoneda.id, jdbcType=INTEGER}
	</if>	
	<if test="mtrClaseDocumento != null and mtrClaseDocumento.id != null">
		AND mtr_clase_documento_id = #{mtrClaseDocumento.id, jdbcType=INTEGER}
	</if>	
	<if test="concepto != null and concepto != '' ">
		AND concepto = #{concepto}
	</if>	
	<if test="descuentoh != null and descuentoh != '' ">
		AND descuentoh = #{descuentoh}
	</if>	
	<if test="fechaAprobacion != null ">
		AND fecha_aprobacion = #{fechaAprobacion, jdbcType=DATE}
	</if>
	<if test="fechaContabDocument != null ">
		AND fecha_contab_document = #{fechaContabDocument, jdbcType=DATE}
	</if>
	<if test="fechaDesde != null ">
		AND fecha_desde = #{fechaDesde, jdbcType=DATE}
	</if>
	<if test="fechaHasta != null ">
		AND fecha_hasta = #{fechaHasta, jdbcType=DATE}
	</if>
	<if test="grupoCompras != null and grupoCompras != '' ">
		AND grupo_compras = #{grupoCompras}
	</if>	
	<if test="hojaServicio != null and hojaServicio != '' ">
		AND hoja_servicio = #{hojaServicio}
	</if>	
	<if test="lugarPrestServ != null and lugarPrestServ != '' ">
		AND lugar_prest_serv = #{lugarPrestServ}
	</if>	
	<if test="monto != null ">
		AND monto = #{monto, jdbcType=NUMERIC}
	</if>	
	<if test="montoTotal != null ">
		AND monto_total = #{montoTotal, jdbcType=NUMERIC}
	</if>	
	<if test="montoTotalAdjustado != null ">
		AND monto_total_adjustado = #{montoTotalAdjustado, jdbcType=NUMERIC}
	</if>	
	<if test="notasRechazo != null and notasRechazo != '' ">
		AND notas_rechazo = #{notasRechazo}
	</if>	
	<if test="observacion != null and observacion != '' ">
		AND observacion = #{observacion}
	</if>	
	<if test="ocurrencia != null ">
		AND ocurrencia = #{ocurrencia, jdbcType=INTEGER}
	</if>	
	<if test="respoExterno != null and respoExterno != '' ">
		AND respo_externo = #{respoExterno}
	</if>	
	<if test="solicitante != null and solicitante != '' ">
		AND solicitante = #{solicitante}
	</if>	
	<if test="indTieneFactura != null and indTieneFactura != '' ">
		AND ind_tiene_factura = #{indTieneFactura}
	</if>	
	<if test="mtrCentro != null and mtrCentro.id != null">
		AND mtr_centro_id = #{mtrCentro.id, jdbcType=INTEGER}
	</if>	
	<if test="mtrAlmacen != null and mtrAlmacen.id != null">
		AND mtr_almacen_id = #{mtrAlmacen.id, jdbcType=INTEGER}
	</if>	
	<if test="indCreacionAutomatica != null and indCreacionAutomatica != '' ">
		AND ind_creacion_automatica = #{indCreacionAutomatica}
	</if>	
	<if test="fechaContabilizacion != null ">
		AND fecha_contabilizacion = #{fechaContabilizacion, jdbcType=DATE}
	</if>
	<if test="nroGuiaRemision != null and nroGuiaRemision != '' ">
		AND nro_guia_remision = #{nroGuiaRemision}
	</if>	
</select>

	<select id="findAllByCodesSap" parameterType="com.incloud.hcp.domain.CerCertificado" resultMap="cerCertificadoResultMap">
		SELECT
		cer_certificado_id ,
		codigo_certificado ,
		mtr_proveedor_id ,
		cer_nota_pedido_id ,
		mtr_sociedad_id ,
		mtr_estado_id ,
		mtr_moneda_id ,
		mtr_clase_documento_id ,
		concepto ,
		descuentoh ,
		fecha_aprobacion ,
		fecha_contab_document ,
		fecha_desde ,
		fecha_hasta ,
		grupo_compras ,
		hoja_servicio ,
		lugar_prest_serv ,
		monto ,
		monto_total ,
		monto_total_adjustado ,
		notas_rechazo ,
		observacion ,
		ocurrencia ,
		respo_externo ,
		solicitante ,
		ind_tiene_factura ,
		mtr_centro_id ,
		mtr_almacen_id ,
		ind_creacion_automatica ,
		fecha_contabilizacion ,
		nro_guia_remision
		FROM
		cer_certificado
		WHERE 1 = 1

		<if test="codes != null and codes != '' ">
			AND codigo_certificado IN (#{codes, jdbcType=VARCHAR})
		</if>

	</select>
	<insert id="registrarDatosAprobacion" statementType="CALLABLE">
        { CALL SP_APROBACION_CERTIFICADO_MASIVO(
        #{ip_id_certificado},
        #{ip_currentOpe, jdbcType=VARCHAR},
        #{ip_code_next_estado, jdbcType=VARCHAR},
        #{ip_code_next_estado_historial, jdbcType=VARCHAR},
        #{ip_user_login, jdbcType=VARCHAR},
        #{ip_indicador_error_previo},
        #{ip_monto_total_ajustado, jdbcType = DECIMAL, javaType=java.math.BigDecimal},
        #{ip_user_nombre_completo, jdbcType=VARCHAR},
        #{ip_user_nombre_completo_aux, jdbcType=VARCHAR},
        #{ip_texto_mensaje_operacion, jdbcType=VARCHAR},
        #{ip_id_cer_firma},
        #{ip_indicador_creacion_hes},
        #{ip_code_certificado_hijo_automatico, jdbcType=VARCHAR},
        #{ip_texto_sap, jdbcType=VARCHAR},
        #{mensajeSap.type, jdbcType=VARCHAR, javaType=java.lang.String, mode = OUT},
        #{mensajeSap.code, jdbcType=VARCHAR, javaType=java.lang.String, mode = OUT},
        #{mensajeSap.texto, jdbcType=VARCHAR, javaType=java.lang.String, mode = OUT}
        )}
    </insert>
<insert id="insertBean" >
INSERT INTO  cer_certificado(
cer_certificado_id , 
codigo_certificado , 
mtr_proveedor_id , 
cer_nota_pedido_id , 
mtr_sociedad_id , 
mtr_estado_id , 
mtr_moneda_id , 
mtr_clase_documento_id , 
concepto , 
descuentoh , 
fecha_aprobacion , 
fecha_contab_document , 
fecha_desde , 
fecha_hasta , 
grupo_compras , 
hoja_servicio , 
lugar_prest_serv , 
monto , 
monto_total , 
monto_total_adjustado , 
notas_rechazo , 
observacion , 
ocurrencia , 
respo_externo , 
solicitante , 
ind_tiene_factura , 
mtr_centro_id , 
mtr_almacen_id , 
ind_creacion_automatica , 
fecha_contabilizacion , 
nro_guia_remision 
)
VALUES
(
#{id} , 
#{codigoCertificado} , 
#{mtrProveedor.id} , 
#{cerNotaPedido.id} , 
#{mtrSociedad.id} , 
#{mtrEstado.id} , 
#{mtrMoneda.id} , 
#{mtrClaseDocumento.id} , 
#{concepto} , 
#{descuentoh} , 
#{fechaAprobacion} , 
#{fechaContabDocument} , 
#{fechaDesde} , 
#{fechaHasta} , 
#{grupoCompras} , 
#{hojaServicio} , 
#{lugarPrestServ} , 
#{monto} , 
#{montoTotal} , 
#{montoTotalAdjustado} , 
#{notasRechazo} , 
#{observacion} , 
#{ocurrencia} , 
#{respoExterno} , 
#{solicitante} , 
#{indTieneFactura} , 
#{mtrCentro.id} , 
#{mtrAlmacen.id} , 
#{indCreacionAutomatica} , 
#{fechaContabilizacion} , 
#{nroGuiaRemision} 
)

</insert>

<insert id="insertMap" parameterType="java.util.Map" >
INSERT INTO  cer_certificado(
cer_certificado_id , 
codigo_certificado , 
mtr_proveedor_id , 
cer_nota_pedido_id , 
mtr_sociedad_id , 
mtr_estado_id , 
mtr_moneda_id , 
mtr_clase_documento_id , 
concepto , 
descuentoh , 
fecha_aprobacion , 
fecha_contab_document , 
fecha_desde , 
fecha_hasta , 
grupo_compras , 
hoja_servicio , 
lugar_prest_serv , 
monto , 
monto_total , 
monto_total_adjustado , 
notas_rechazo , 
observacion , 
ocurrencia , 
respo_externo , 
solicitante , 
ind_tiene_factura , 
mtr_centro_id , 
mtr_almacen_id , 
ind_creacion_automatica , 
fecha_contabilizacion , 
nro_guia_remision 
)
(
<foreach collection="list" item="element" index="index" separator=" UNION ">  
SELECT
#{element.id} , 
#{element.codigoCertificado} , 
#{element.mtrProveedor.id} , 
#{element.cerNotaPedido.id} , 
#{element.mtrSociedad.id} , 
#{element.mtrEstado.id} , 
#{element.mtrMoneda.id} , 
#{element.mtrClaseDocumento.id} , 
#{element.concepto} , 
#{element.descuentoh} , 
#{element.fechaAprobacion} , 
#{element.fechaContabDocument} , 
#{element.fechaDesde} , 
#{element.fechaHasta} , 
#{element.grupoCompras} , 
#{element.hojaServicio} , 
#{element.lugarPrestServ} , 
#{element.monto} , 
#{element.montoTotal} , 
#{element.montoTotalAdjustado} , 
#{element.notasRechazo} , 
#{element.observacion} , 
#{element.ocurrencia} , 
#{element.respoExterno} , 
#{element.solicitante} , 
#{element.indTieneFactura} , 
#{element.mtrCentro.id} , 
#{element.mtrAlmacen.id} , 
#{element.indCreacionAutomatica} , 
#{element.fechaContabilizacion} , 
#{element.nroGuiaRemision} 
from dual

</foreach>    
)

</insert>


<update id="updateBean">
    UPDATE cer_certificado
    <set>
	<if test="codigoCertificado != null and codigoCertificado != '' ">
		codigo_certificado = #{codigoCertificado},
	</if>	
	<if test="mtrProveedorId != null ">
		mtr_proveedor_id = #{mtrProveedor.id, jdbcType=INTEGER},
	</if>	
	<if test="cerNotaPedidoId != null ">
		cer_nota_pedido_id = #{cerNotaPedido.id, jdbcType=INTEGER},
	</if>	
	<if test="mtrSociedadId != null ">
		mtr_sociedad_id = #{mtrSociedad.id, jdbcType=INTEGER},
	</if>	
	<if test="mtrEstadoId != null ">
		mtr_estado_id = #{mtrEstado.id, jdbcType=INTEGER},
	</if>	
	<if test="mtrMonedaId != null ">
		mtr_moneda_id = #{mtrMoneda.id, jdbcType=INTEGER},
	</if>	
	<if test="mtrClaseDocumentoId != null ">
		mtr_clase_documento_id = #{mtrClaseDocumento.id, jdbcType=INTEGER},
	</if>	
	<if test="concepto != null and concepto != '' ">
		concepto = #{concepto},
	</if>	
	<if test="descuentoh != null and descuentoh != '' ">
		descuentoh = #{descuentoh},
	</if>	
	<if test="fechaAprobacion != null ">
		fecha_aprobacion = #{fechaAprobacion, jdbcType=DATE},
	</if>	
	<if test="fechaContabDocument != null ">
		fecha_contab_document = #{fechaContabDocument, jdbcType=DATE},
	</if>	
	<if test="fechaDesde != null ">
		fecha_desde = #{fechaDesde, jdbcType=DATE},
	</if>	
	<if test="fechaHasta != null ">
		fecha_hasta = #{fechaHasta, jdbcType=DATE},
	</if>	
	<if test="grupoCompras != null and grupoCompras != '' ">
		grupo_compras = #{grupoCompras},
	</if>	
	<if test="hojaServicio != null and hojaServicio != '' ">
		hoja_servicio = #{hojaServicio},
	</if>	
	<if test="lugarPrestServ != null and lugarPrestServ != '' ">
		lugar_prest_serv = #{lugarPrestServ},
	</if>	
	<if test="monto != null ">
		monto = #{monto, jdbcType=NUMERIC},
	</if>	
	<if test="montoTotal != null ">
		monto_total = #{montoTotal, jdbcType=NUMERIC},
	</if>	
	<if test="montoTotalAdjustado != null ">
		monto_total_adjustado = #{montoTotalAdjustado, jdbcType=NUMERIC},
	</if>	
	<if test="notasRechazo != null and notasRechazo != '' ">
		notas_rechazo = #{notasRechazo},
	</if>	
	<if test="observacion != null and observacion != '' ">
		observacion = #{observacion},
	</if>	
	<if test="ocurrencia != null ">
		ocurrencia = #{ocurrencia, jdbcType=INTEGER},
	</if>	
	<if test="respoExterno != null and respoExterno != '' ">
		respo_externo = #{respoExterno},
	</if>	
	<if test="solicitante != null and solicitante != '' ">
		solicitante = #{solicitante},
	</if>	
	<if test="indTieneFactura != null and indTieneFactura != '' ">
		ind_tiene_factura = #{indTieneFactura},
	</if>	
	<if test="mtrCentroId != null ">
		mtr_centro_id = #{mtrCentro.id, jdbcType=INTEGER},
	</if>	
	<if test="mtrAlmacenId != null ">
		mtr_almacen_id = #{mtrAlmacen.id, jdbcType=INTEGER},
	</if>	
	<if test="indCreacionAutomatica != null and indCreacionAutomatica != '' ">
		ind_creacion_automatica = #{indCreacionAutomatica},
	</if>	
	<if test="fechaContabilizacion != null ">
		fecha_contabilizacion = #{fechaContabilizacion, jdbcType=DATE},
	</if>	
	<if test="nroGuiaRemision != null and nroGuiaRemision != '' ">
		nro_guia_remision = #{nroGuiaRemision},
	</if>	
    </set> 
	WHERE 
	  cer_certificado_id = #{id, jdbcType=INTEGER}	
</update>


<delete id="deleteBean">
    DELETE FROM cer_certificado
	WHERE 1 = 1
	<if test="id != null ">
		AND cer_certificado_id = #{id, jdbcType=INTEGER}
	</if>	
	<if test="codigoCertificado != null and codigoCertificado != '' ">
		AND codigo_certificado = #{codigoCertificado}
	</if>	
	<if test="mtrProveedor != null and mtrProveedor.id != null">
		AND mtr_proveedor_id = #{mtrProveedor.id}
	</if>	
	<if test="cerNotaPedido != null and cerNotaPedido.id != null">
		AND cer_nota_pedido_id = #{cerNotaPedido.id}
	</if>	
	<if test="mtrSociedad != null and mtrSociedad.id != null">
		AND mtr_sociedad_id = #{mtrSociedad.id}
	</if>	
	<if test="mtrEstado != null and mtrEstado.id != null">
		AND mtr_estado_id = #{mtrEstado.id}
	</if>	
	<if test="mtrMoneda != null and mtrMoneda.id != null">
		AND mtr_moneda_id = #{mtrMoneda.id}
	</if>	
	<if test="mtrClaseDocumento != null and mtrClaseDocumento.id != null">
		AND mtr_clase_documento_id = #{mtrClaseDocumento.id}
	</if>	
	<if test="concepto != null and concepto != '' ">
		AND concepto = #{concepto}
	</if>	
	<if test="descuentoh != null and descuentoh != '' ">
		AND descuentoh = #{descuentoh}
	</if>	
	<if test="fechaAprobacion != null ">
		AND fecha_aprobacion = #{fechaAprobacion, jdbcType=DATE}
	</if>	
	<if test="fechaContabDocument != null ">
		AND fecha_contab_document = #{fechaContabDocument, jdbcType=DATE}
	</if>	
	<if test="fechaDesde != null ">
		AND fecha_desde = #{fechaDesde, jdbcType=DATE}
	</if>	
	<if test="fechaHasta != null ">
		AND fecha_hasta = #{fechaHasta, jdbcType=DATE}
	</if>	
	<if test="grupoCompras != null and grupoCompras != '' ">
		AND grupo_compras = #{grupoCompras}
	</if>	
	<if test="hojaServicio != null and hojaServicio != '' ">
		AND hoja_servicio = #{hojaServicio}
	</if>	
	<if test="lugarPrestServ != null and lugarPrestServ != '' ">
		AND lugar_prest_serv = #{lugarPrestServ}
	</if>	
	<if test="monto != null ">
		AND monto = #{monto, jdbcType=NUMERIC}
	</if>	
	<if test="montoTotal != null ">
		AND monto_total = #{montoTotal, jdbcType=NUMERIC}
	</if>	
	<if test="montoTotalAdjustado != null ">
		AND monto_total_adjustado = #{montoTotalAdjustado, jdbcType=NUMERIC}
	</if>	
	<if test="notasRechazo != null and notasRechazo != '' ">
		AND notas_rechazo = #{notasRechazo}
	</if>	
	<if test="observacion != null and observacion != '' ">
		AND observacion = #{observacion}
	</if>	
	<if test="ocurrencia != null ">
		AND ocurrencia = #{ocurrencia, jdbcType=INTEGER}
	</if>	
	<if test="respoExterno != null and respoExterno != '' ">
		AND respo_externo = #{respoExterno}
	</if>	
	<if test="solicitante != null and solicitante != '' ">
		AND solicitante = #{solicitante}
	</if>	
	<if test="indTieneFactura != null and indTieneFactura != '' ">
		AND ind_tiene_factura = #{indTieneFactura}
	</if>	
	<if test="mtrCentro != null and mtrCentro.id != null">
		AND mtr_centro_id = #{mtrCentro.id}
	</if>	
	<if test="mtrAlmacen != null and mtrAlmacen.id != null">
		AND mtr_almacen_id = #{mtrAlmacen.id}
	</if>	
	<if test="indCreacionAutomatica != null and indCreacionAutomatica != '' ">
		AND ind_creacion_automatica = #{indCreacionAutomatica}
	</if>	
	<if test="fechaContabilizacion != null ">
		AND fecha_contabilizacion = #{fechaContabilizacion, jdbcType=DATE}
	</if>	
	<if test="nroGuiaRemision != null and nroGuiaRemision != '' ">
		AND nro_guia_remision = #{nroGuiaRemision}
	</if>	
</delete>

<delete id="deleteAll">
   DELETE FROM cer_certificado
</delete>

</mapper>